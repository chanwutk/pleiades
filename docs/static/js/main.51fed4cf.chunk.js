(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{292:function(e,t,a){e.exports=a(407)},297:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(75),l=a.n(c),o=(a(297),a(57)),i=a(461),s=a(466),u=a(472),d=a(217),p=a.n(d),m=a(278),f=a.n(m),g=a(277),b=a.n(g),v=a(244),h=a(467),E=function(e){return{tag:"failure",value:e}},y=a(270),w=a.n(y),j=a(274),k=a.n(j),O=a(273),S=a.n(O),C=a(478),x=a(468),N=a(484),I=a(485),M=a(469),B=Object(i.a)(function(e){return{textField:{marginTop:e.spacing(0),marginBottom:e.spacing(4),width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},errorMessage:{fontStyle:"italic",color:"red"}}}),T=function(e){var t=e.isOpen,a=e.onClose,n=e.value,c=e.setValue,l=e.alias,o=e.setAlias,i=e.errorMsg,s=e.extras,u=B();return r.a.createElement(N.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0},r.a.createElement(I.a,{disableTypography:!0},r.a.createElement(C.a,{id:"standard-name",label:"Name",className:u.textField,value:l,onChange:function(e){return o(e.target.value)},margin:"normal"}),r.a.createElement(h.a,{onClick:function(){return a(!0)}},r.a.createElement(S.a,null),"\xa0 Save"),s,r.a.createElement(x.a,{className:u.closeButton,onClick:function(){return a(!1)}},r.a.createElement(k.a,null))),r.a.createElement(M.a,null,r.a.createElement("div",{className:"editor"},r.a.createElement(w.a,{language:"json",value:n,height:400,onChange:function(e){return c(e)},editorDidMount:function(e){return e.focus()},options:{automaticLayout:!0,cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})),r.a.createElement("span",{className:u.errorMessage},i||null)))},A=[{data:{url:"https://vega.github.io/editor/data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Miles_per_Gallon",type:"quantitative"}}},{data:{url:"https://vega.github.io/editor/data/population.json"},transform:[{filter:"datum.year == 2000"}],mark:"bar",encoding:{y:{field:"age",type:"ordinal",scale:{rangeStep:17}},x:{aggregate:"sum",field:"people",type:"quantitative",axis:{title:"population"}}}}],R=function(e){var t=e.showModal,a=e.setShowModal,c=e.value,l=e.setValue,i=e.alias,s=e.setAlias,u=e.onSuccess,d=Object(n.useState)(""),m=Object(o.a)(d,2),f=m[0],g=m[1],b=A.map(function(e,t){return r.a.createElement(h.a,{key:t,onClick:function(){return l(p()(e))}},"Example ",t+1)});return r.a.createElement(T,{isOpen:t,onClose:function(e){if(!e)return g(""),void a(!1);var t=function(e){try{var t=JSON.parse(e);return"data"in t&&"url"in t.data?(v.a(t),{tag:"success",value:t}):E("data field must exist and must be url.")}catch(a){if(a instanceof SyntaxError)return E(a.message);if("Invalid spec"===a.message)return E(a.message);throw a}}(c);switch(t.tag){case"success":return g(""),u(i,t.value),void a(!1);case"failure":return void g(t.value)}},value:c,setValue:l,alias:i,setAlias:s,errorMsg:f,extras:b})},V=a(486),F=Object(i.a)(function(e){return{keyColumn:{textAlign:"right"}}}),G=function(e){var t=e.table,a=e.children,n=F(),c=r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){var t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:n.keyColumn},r.a.createElement("strong",null,a),":"),r.a.createElement("td",null,c))})));return r.a.createElement(V.a,{placement:"top",title:c},a)},J=a(471),L=a(470),W=r.a.createContext(null),D=a(214),q=a(276),U=a.n(q),z=a(212),P=a(284),_=r.a.memo(P.a,function(e,t){var a=e.spec,n=Object(D.a)(e,["spec"]),r=t.spec,c=Object(D.a)(t,["spec"]);return U()(n,c)&&z.a.isSameSpec(a,r)}),H=Object(i.a)(function(e){return{wrapper:{height:150,"&::after":{display:"block",position:"relative",marginTop:"-57%",width:150,backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75))",height:"75%",content:"''"}},image:{overflow:"hidden",height:150},preview:{position:"relative",userSelect:"none",border:2,borderColor:function(e){return e?"#3caea3":"transparent"},borderStyle:"solid","&:hover":{borderColor:"#f6d55c"},"&:active":{borderColor:"#ed553b"}},center:{position:"absolute",left:"50%",transform:"translate(-50%, 0)"},top:{position:"absolute",right:0,top:0,"& button":{marginRight:e.spacing(1),marginTop:e.spacing(1)}},bottom:{bottom:10,color:"white"}}}),X=function(e){var t=e.spec,a=e.operand1Id,c=e.active,l=Object(n.useState)(!1),i=Object(o.a)(l,2),s=i[0],d=i[1],m=Object(n.useState)(""),g=Object(o.a)(m,2),v=g[0],h=g[1],E=Object(n.useState)(""),y=Object(o.a)(E,2),w=y[0],j=y[1],k=Object(n.useContext)(W),O=H(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{disableGutters:!0,className:O.preview,onClick:function(){var e=t.id;k({type:"select-operand1",id:e===a?null:e})}},r.a.createElement(G,{table:[["Data URL",t.spec.data.url],["Mark Type",t.spec.mark]]},r.a.createElement("div",{className:O.wrapper},r.a.createElement("div",{className:O.image},r.a.createElement(_,{spec:t.spec,width:150,height:150})))),r.a.createElement("div",{className:O.top},r.a.createElement(J.a,{size:"small",color:"primary",onClick:function(){h(p()(t.spec)),j(t.alias),d(!0)}},r.a.createElement(b.a,null)),r.a.createElement(J.a,{size:"small",color:"secondary",onClick:function(){k({type:"delete-spec",id:t.id})}},r.a.createElement(f.a,null))),r.a.createElement("div",{className:O.center+" "+O.bottom},t.alias)),r.a.createElement(u.a,null),r.a.createElement(R,{showModal:s,setShowModal:d,onSuccess:function(e,a){k({type:"modify-spec",json:a,alias:e,id:t.id})},value:v,setValue:h,alias:w,setAlias:j}))},Y=Object(i.a)(function(e){return{list:{overflowY:"auto",overflowX:"hidden",flexGrow:1,paddingTop:0,paddingBottom:0}}}),$=function(e){var t=e.currentState,a=Y();return r.a.createElement(s.a,{className:a.list},r.a.createElement(u.a,null),t.specs.map(function(e){return r.a.createElement(X,{key:e.id,spec:e,operand1Id:t.operand1Id,active:e.id===t.operand1Id})}))},K=a(279),Q=a.n(K),Z=Object(i.a)(function(e){return{button:{marginBottom:e.spacing(1)}}}),ee=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),m=p[0],f=p[1],g=Object(n.useContext)(W),b=Z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){u(""),f("Untitled"),c(!0)},className:b.button},r.a.createElement(Q.a,null)," \xa0 New Spec"),r.a.createElement(R,{showModal:a,setShowModal:c,onSuccess:function(e,t){g({type:"add-spec",json:t,alias:e})},value:s,setValue:u,alias:m,setAlias:f}))},te=Object(i.a)(function(e){return{main:{backgroundColor:e.palette.grey[200],marginTop:e.spacing(1),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"}}}),ae=function(e){var t=e.view,a=te();return r.a.createElement("div",{className:a.main},t?r.a.createElement(_,{spec:t.export()}):"Empty View")},ne=a(280),re=a.n(ne),ce=a(281),le=a.n(ce),oe=a(473),ie=function(e){var t=e.specs,a=e.operand1Id,c=e.operand2,l=e.result,o=Object(n.useContext)(W),i=function(e){t.forEach(function(t){t.id!==a||o({type:"operate",operand1:t.spec,operand2:c,operator:e})})},s=null===a||null===c,u=null===a||null===c,d=null!==a||null===c,p=null!==a||null===c,m=null===a||null!==c||null!==l;return r.a.createElement(oe.a,{container:!0,justify:"space-between"},r.a.createElement(oe.a,{item:!0},r.a.createElement(h.a,{onClick:function(){return i("layer")},disabled:s},"Layer"),r.a.createElement(h.a,{onClick:function(){return i("concat")},disabled:u},"Concat"),r.a.createElement(h.a,{onClick:function(){return i("repeat")},disabled:d},"Repeat"),r.a.createElement(h.a,{onClick:function(){return i("facet")},disabled:p},"Facet"),r.a.createElement(h.a,{onClick:function(){return i("place")},disabled:m},"Place")),r.a.createElement(oe.a,{item:!0},r.a.createElement(h.a,{onClick:function(){return o({type:"undo"})}},r.a.createElement(re.a,null)," \xa0 Undo"),r.a.createElement(h.a,{onClick:function(){return o({type:"redo"})}},r.a.createElement(le.a,null)," \xa0 Redo")))},se=a(282),ue=a(474),de=a(475),pe=a(476),me=a(481),fe=a(283),ge=a(479),be=a(482),ve=a(477),he=a(483),Ee=a(31),ye=a(27),we=a(30),je=a(22),ke=a(23);function Oe(e){return JSON.parse(JSON.stringify(e))}var Se=function(e){function t(e){return Object(je.a)(this,t),Object(Ee.a)(this,Object(ye.a)(t).call(this,e))}return Object(we.a)(t,e),t}(function(){function e(t){Object(je.a)(this,e),this.view=void 0,this.view=t}return Object(ke.a)(e,[{key:"export",value:function(){return this.view.export()}}]),e}()),Ce=function(){function e(t){Object(je.a)(this,e),this.spec=void 0,this.spec=Oe(t)}return Object(ke.a)(e,[{key:"edit",value:function(e){this.spec=Oe(e)}},{key:"export",value:function(){return Oe(this.spec)}}]),e}(),xe=function(e,t){return{current:t(e.current),undoStack:ue.a(e.current,e.undoStack),redoStack:[]}},Ne=function(e,t){switch(t.type){case"add-spec":return xe(e,function(e){var a=e.specs,n=e.specCount,r=Object(D.a)(e,["specs","specCount"]);return Object(se.a)({specs:de.a({id:n,spec:t.json,alias:t.alias},a),specCount:n+1},r)});case"modify-spec":return xe(e,pe.a(me.a("specs"),fe.a(function(e){return e.id===t.id?{id:t.id,spec:t.json,alias:t.alias}:e})));case"delete-spec":return xe(e,ge.a(pe.a(me.a("specs"),be.a(function(e){return e.id!==t.id})),pe.a(me.a("operand1Id"),function(){var a=e.current.operand1Id;return a===t.id?null:a})));case"undo":var a=e.current,n=e.undoStack,r=e.redoStack;return n.length>0?{redoStack:ue.a(a,r),current:n[0],undoStack:n.slice(1)}:e;case"redo":var c=e.current,l=e.undoStack,o=e.redoStack;return o.length>0?{redoStack:o.slice(1),current:o[0],undoStack:ue.a(c,l)}:e;case"select-operand1":return xe(e,pe.a(me.a("operand1Id"),ve.a(t.id)));case"select-operand2":return xe(e,pe.a(me.a("operand2"),ve.a(t.operand)));case"operate":return xe(e,ge.a(pe.a(me.a("result"),function(){var a=new Se(new Ce(t.operand1)),n=e.current,r=n.result;switch(n.result=he.a(r),t.operator){case"place":return a;case"layer":case"concat":case"repeat":case"facet":default:return r}}),pe.a(me.a("operand1Id"),ve.a(null)),pe.a(me.a("operand2"),ve.a(null))));default:throw new Error("impossible")}},Ie={current:{specs:[],specCount:0,operand1Id:null,operand2:null,result:null},undoStack:[],redoStack:[]},Me=Object(i.a)(function(e){return{root:{height:600,display:"flex"},left:{height:"100%",display:"flex",flexDirection:"column",width:150,marginRight:e.spacing(1)},right:{flexGrow:1,display:"flex",flexDirection:"column"}}}),Be=function(){var e=Object(n.useReducer)(Ne,Ie),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Me();return r.a.createElement(W.Provider,{value:c},r.a.createElement("div",{className:l.root},r.a.createElement("div",{className:l.left},r.a.createElement(ee,null),r.a.createElement($,{currentState:a.current})),r.a.createElement("div",{className:l.right},r.a.createElement(ie,{specs:a.current.specs,operand1Id:a.current.operand1Id,operand2:a.current.operand2,result:a.current.result}),r.a.createElement(ae,{view:a.current.result}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[292,1,2]]]);
//# sourceMappingURL=main.51fed4cf.chunk.js.map