(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{292:function(e,t,a){e.exports=a(407)},297:function(e,t,a){},407:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(75),i=a.n(c),o=(a(297),a(57)),l=a(461),s=a(466),u=a(472),m=a(214),d=a.n(m),p=a(278),f=a.n(p),g=a(277),b=a.n(g),h=a(243),v=a(467),E=function(e){return{tag:"failure",value:e}},w=a(270),y=a.n(w),j=a(274),k=a.n(j),O=a(273),S=a.n(O),C=a(477),x=a(468),N=a(481),M=a(482),V=a(469),B=Object(l.a)(function(e){return{textField:{marginTop:e.spacing(0),marginBottom:e.spacing(4),width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},errorMessage:{fontStyle:"italic",color:"red"}}}),T=function(e){var t=e.isOpen,a=e.onClose,n=e.value,c=e.setValue,i=e.alias,o=e.setAlias,l=e.errorMsg,s=e.extras,u=B();return r.a.createElement(N.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0},r.a.createElement(M.a,{disableTypography:!0},r.a.createElement(C.a,{id:"standard-name",label:"Name",className:u.textField,value:i,onChange:function(e){return o(e.target.value)},margin:"normal"}),r.a.createElement(v.a,{onClick:function(){return a(!0)}},r.a.createElement(S.a,null),"\xa0 Save"),s,r.a.createElement(x.a,{className:u.closeButton,onClick:function(){return a(!1)}},r.a.createElement(k.a,null))),r.a.createElement(V.a,null,r.a.createElement("div",{className:"editor"},r.a.createElement(y.a,{language:"json",value:n,height:400,onChange:function(e){return c(e)},editorDidMount:function(e){return e.focus()},options:{automaticLayout:!0,cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})),r.a.createElement("span",{className:u.errorMessage},l||null)))},A=[{data:{url:"https://vega.github.io/editor/data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Miles_per_Gallon",type:"quantitative"}}},{data:{url:"https://vega.github.io/editor/data/population.json"},transform:[{filter:"datum.year == 2000"}],mark:"bar",encoding:{y:{field:"age",type:"ordinal",scale:{rangeStep:17}},x:{aggregate:"sum",field:"people",type:"quantitative",axis:{title:"population"}}}}],R=function(e){var t=e.showModal,a=e.setShowModal,c=e.value,i=e.setValue,l=e.alias,s=e.setAlias,u=e.onSuccess,m=Object(n.useState)(""),p=Object(o.a)(m,2),f=p[0],g=p[1],b=A.map(function(e,t){return r.a.createElement(v.a,{key:t,onClick:function(){return i(d()(e))}},"Example ",t+1)});return r.a.createElement(T,{isOpen:t,onClose:function(e){if(!e)return g(""),void a(!1);var t=function(e){try{var t=JSON.parse(e);return"data"in t&&"url"in t.data?(h.a(t),{tag:"success",value:t}):E("data field must exist and must be url.")}catch(a){if(a instanceof SyntaxError)return E(a.message);if("Invalid spec"===a.message)return E(a.message);throw a}}(c);switch(t.tag){case"success":return g(""),u(l,t.value),void a(!1);case"failure":return void g(t.value)}},value:c,setValue:i,alias:l,setAlias:s,errorMsg:f,extras:b})},F=a(483),G=Object(l.a)(function(e){return{keyColumn:{textAlign:"right"}}}),J=function(e){var t=e.table,a=e.children,n=G(),c=r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){var t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:n.keyColumn},r.a.createElement("strong",null,a),":"),r.a.createElement("td",null,c))})));return r.a.createElement(F.a,{placement:"top",title:c},a)},L=a(471),W=a(470),D=r.a.createContext(null),I=a(211),q=a(276),U=a.n(q),z=a(209),_=a(284),H=r.a.memo(_.a,function(e,t){var a=e.spec,n=Object(I.a)(e,["spec"]),r=t.spec,c=Object(I.a)(t,["spec"]);return U()(n,c)&&z.a.isSameSpec(a,r)}),P=a(31),X=a(27),Y=a(30),$=a(22),K=a(23);function Q(e){return JSON.parse(JSON.stringify(e))}var Z=function(e){function t(e){return Object($.a)(this,t),Object(P.a)(this,Object(X.a)(t).call(this,e))}return Object(Y.a)(t,e),t}(function(){function e(t){Object($.a)(this,e),this.view=void 0,this.view=t}return Object(K.a)(e,[{key:"export",value:function(){return this.view.export()}}]),e}()),ee=function(){function e(t){Object($.a)(this,e),this.spec=void 0,this.spec=Q(t)}return Object(K.a)(e,[{key:"edit",value:function(e){this.spec=Q(e)}},{key:"export",value:function(){return Q(this.spec)}}]),e}(),te=Object(l.a)(function(e){return{wrapper:{height:150,"&::after":{display:"block",position:"relative",marginTop:"-57%",width:150,backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75))",height:"75%",content:"''"}},image:{overflow:"hidden",height:150},preview:{position:"relative",userSelect:"none",border:1,borderColor:function(e){return e?"orange":"white"},borderStyle:"solid"},center:{position:"absolute",left:"50%",transform:"translate(-50%, 0)"},top:{position:"absolute",right:0,top:0,"& button":{marginRight:e.spacing(1),marginTop:e.spacing(1)}},bottom:{bottom:10,color:"white"}}}),ae=function(e){var t=e.spec,a=e.mode,c=Object(n.useState)(!1),i=Object(o.a)(c,2),l=i[0],s=i[1],m=Object(n.useState)(""),p=Object(o.a)(m,2),g=p[0],h=p[1],v=Object(n.useState)(""),E=Object(o.a)(v,2),w=E[0],y=E[1],j=Object(n.useContext)(D),k=te(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{disableGutters:!0,className:k.preview,onClick:function(){switch(a){case"initial":j({type:"modify-view",newView:new Z(new ee(t.spec))})}j({type:"select-mode",mode:null})}},r.a.createElement(J,{table:[["Data URL",t.spec.data.url],["Mark Type",t.spec.mark]]},r.a.createElement("div",{className:k.wrapper},r.a.createElement("div",{className:k.image},r.a.createElement(H,{spec:t.spec,width:150,height:150})))),r.a.createElement("div",{className:k.top},r.a.createElement(L.a,{size:"small",color:"primary",onClick:function(){h(d()(t.spec)),y(t.alias),s(!0)}},r.a.createElement(b.a,null)),r.a.createElement(L.a,{size:"small",color:"secondary",onClick:function(){j({type:"delete-spec",id:t.id})}},r.a.createElement(f.a,null))),r.a.createElement("div",{className:k.center+" "+k.bottom},t.alias)),r.a.createElement(u.a,null),r.a.createElement(R,{showModal:l,setShowModal:s,onSuccess:function(e,a){j({type:"modify-spec",json:a,alias:e,id:t.id})},value:g,setValue:h,alias:w,setAlias:y}))},ne=Object(l.a)(function(e){return{list:{overflowY:"auto",overflowX:"hidden",flexGrow:1,paddingTop:0,paddingBottom:0}}}),re=function(e){var t=e.state,a=ne();return r.a.createElement(s.a,{className:a.list},r.a.createElement(u.a,null),t.current.specs.map(function(e){return r.a.createElement(ae,{key:e.id,spec:e,mode:t.current.mode})}))},ce=a(279),ie=a.n(ce),oe=Object(l.a)(function(e){return{button:{marginBottom:e.spacing(1)}}}),le=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),l=Object(o.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),p=d[0],f=d[1],g=Object(n.useContext)(D),b=oe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:function(){u(""),f("Untitled"),c(!0)},className:b.button},r.a.createElement(ie.a,null)," \xa0 New Spec"),r.a.createElement(R,{showModal:a,setShowModal:c,onSuccess:function(e,t){g({type:"add-spec",json:t,alias:e})},value:s,setValue:u,alias:p,setAlias:f}))},se=Object(l.a)(function(e){return{main:{backgroundColor:e.palette.grey[200],marginTop:e.spacing(1),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"}}}),ue=function(e){var t=e.view,a=se();return r.a.createElement("div",{className:a.main},t?r.a.createElement(H,{spec:t.export()}):"Empty View")},me=a(280),de=a.n(me),pe=a(281),fe=a.n(pe),ge=a(473),be=function(e){var t=e.state,a=Object(n.useContext)(D),c=function(e){a({type:"select-mode",mode:e})},i=null!==t.current.mode;return r.a.createElement(ge.a,{container:!0,justify:"space-between"},r.a.createElement(ge.a,{item:!0},r.a.createElement(v.a,{onClick:function(){return c("layer")},disabled:i},"Layer"),r.a.createElement(v.a,{onClick:function(){return c("concat")},disabled:i},"Concat"),r.a.createElement(v.a,{onClick:function(){return c("repeat")},disabled:i},"Repeat"),r.a.createElement(v.a,{onClick:function(){return c("facet")},disabled:i},"Facet")),r.a.createElement(ge.a,{item:!0},r.a.createElement(v.a,{onClick:function(){return a({type:"undo"})}},r.a.createElement(de.a,null)," \xa0 Undo"),r.a.createElement(v.a,{onClick:function(){return a({type:"redo"})}},r.a.createElement(fe.a,null)," \xa0 Redo")))},he=a(282),ve=a(474),Ee=a(475),we=a(476),ye=a(479),je=a(283),ke=a(480),Oe=function(e,t){return{current:t(e.current),undoStack:ve.a(e.current,e.undoStack),redoStack:[]}},Se=function(e,t){switch(t.type){case"add-spec":return Oe(e,function(e){var a=e.specs,n=e.specCount,r=Object(I.a)(e,["specs","specCount"]);return Object(he.a)({specs:Ee.a({id:n,spec:t.json,alias:t.alias},a),specCount:n+1},r)});case"modify-spec":return Oe(e,we.a(ye.a("specs"),je.a(function(e){return e.id===t.id?{id:t.id,spec:t.json,alias:t.alias}:e})));case"delete-spec":return Oe(e,we.a(ye.a("specs"),ke.a(function(e){return e.id!==t.id})));case"undo":var a=e.current,n=e.undoStack,r=e.redoStack;return n.length>0?{redoStack:ve.a(a,r),current:n[0],undoStack:n.slice(1)}:e;case"redo":var c=e.current,i=e.undoStack,o=e.redoStack;return o.length>0?{redoStack:o.slice(1),current:o[0],undoStack:ve.a(c,i)}:e;case"select-mode":return Oe(e,we.a(ye.a("mode"),function(e){return t.mode}));case"modify-view":return Oe(e,we.a(ye.a("mainViewElements"),function(e){return t.newView}));default:throw new Error("impossible")}},Ce={current:{specs:[],specCount:0,mode:"initial",mainViewElements:null},undoStack:[],redoStack:[]},xe=Object(l.a)(function(e){return{root:{height:600,display:"flex"},left:{height:"100%",display:"flex",flexDirection:"column",width:150,marginRight:e.spacing(1)},right:{flexGrow:1,display:"flex",flexDirection:"column"}}}),Ne=function(){var e=Object(n.useReducer)(Se,Ce),t=Object(o.a)(e,2),a=t[0],c=t[1],i=xe();return r.a.createElement(D.Provider,{value:c},r.a.createElement("div",{className:i.root},r.a.createElement("div",{className:i.left},r.a.createElement(le,null),r.a.createElement(re,{state:a})),r.a.createElement("div",{className:i.right},r.a.createElement(be,{state:a}),r.a.createElement(ue,{view:a.current.mainViewElements}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[292,1,2]]]);
//# sourceMappingURL=main.8599edfe.chunk.js.map