(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{346:function(e,t,n){e.exports=n(479)},351:function(e,t,n){},479:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(73),i=n.n(c),o=(n(351),n(521)),l=n(53),u=n(528),s=n(43),d=n(252),f=n.n(d),p=n(325),h=n.n(p),m=n(324),v=n.n(m),b=n(282),g=n(529),y=function(e){return{tag:"failure",value:e}},O=n(320),w=n.n(O),j=n(217),E=n.n(j),k=n(322),C=n.n(k),S=n(545),x=n(530),N=n(548),_=n(524),V=n(531),F=n(306);!function e(t){if("object"===typeof t&&null!==t)for(var n in t.description&&(t.markdownDescription=t.description),t)t.hasOwnProperty(n)&&(t[n]=e(t[n]));return t}(F);var B=Object(o.a)(function(e){return{textField:{marginTop:e.spacing(0),marginBottom:e.spacing(4),width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},errorMessage:{fontStyle:"italic",color:"red"}}}),I=[{schema:F,uri:"https://vega.github.io/schema/vega-lite/v3.json"}],M=function(e){var t=e.isOpen,n=e.onClose,a=e.value,c=e.onChange,i=e.alias,o=e.setAlias,l=e.errorMsg,u=e.extras,s=B();return r.a.createElement(N.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0},r.a.createElement(_.a,{disableTypography:!0},r.a.createElement(S.a,{id:"standard-name",label:"Name",className:s.textField,value:i,onChange:function(e){return o(e.target.value)},margin:"normal"}),r.a.createElement(g.a,{onClick:function(){return n(!0)}},r.a.createElement(C.a,null),"\xa0 Save"),u,r.a.createElement(x.a,{className:s.closeButton,onClick:function(){return n(!1)}},r.a.createElement(E.a,null))),r.a.createElement(V.a,null,r.a.createElement("div",{className:"editor"},r.a.createElement(w.a,{language:"json",value:a,height:400,onChange:c,editorDidMount:function(e){e.focus()},editorWillMount:function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!1,enableSchemaRequest:!0,schemas:I,validate:!0})},options:{automaticLayout:!0,cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})),r.a.createElement("span",{className:s.errorMessage},null!==l?r.a.createElement(r.a.Fragment,null,l," \xa0"):null)))},R=[{$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{url:"https://vega.github.io/editor/data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Miles_per_Gallon",type:"quantitative"}}},{$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{url:"https://vega.github.io/editor/data/cars.json"},mark:{type:"errorband",extent:"stdev"},encoding:{y:{field:"Miles_per_Gallon",type:"quantitative"}}},{$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{url:"https://vega.github.io/editor/data/population.json"},transform:[{filter:"datum.year == 2000"}],mark:"bar",encoding:{y:{field:"age",type:"ordinal",scale:{rangeStep:17}},x:{aggregate:"sum",field:"people",type:"quantitative",axis:{title:"population"}}}}],A=function(e){try{var t=JSON.parse(e);return"data"in t&&("url"in t.data||"values"in t.data)?(b.a(t),{tag:"success",value:t}):y("data field must exist and must be url.")}catch(n){return y(n.message)}},T=function(e){var t=e.showModal,n=e.setShowModal,c=e.value,i=e.setValue,o=e.alias,l=e.setAlias,u=e.onSuccess,d=Object(a.useState)(""),p=Object(s.a)(d,2),h=p[0],m=p[1],v=R.map(function(e,t){return r.a.createElement(g.a,{key:t,onClick:function(){return i(f()(e))}},"Example ",t+1)});return r.a.createElement(M,{isOpen:t,onClose:function(e){if(!e)return m(""),void n(!1);var t=A(c);switch(t.tag){case"success":return m(""),u(o,t.value),void n(!1);case"failure":return void m(t.value)}},value:c,onChange:function(e){i(e);var t=A(e);switch(t.tag){case"success":m("");break;case"failure":m(t.value)}},alias:o,setAlias:l,errorMsg:h,extras:v})},W=n(550),D=Object(o.a)(function(e){return{keyColumn:{textAlign:"right"}}}),$=function(e){var t=e.table,n=e.children,a=D(),c=r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1];return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:a.keyColumn},r.a.createElement("strong",null,n),":"),r.a.createElement("td",null,c))})));return r.a.createElement(W.a,{placement:"top",title:c},n)},q=n(532),L=n(496),G=n(157),J=n(243),P=n(333),U=r.a.memo(P.a,function(e,t){var n=e.spec,a=Object(G.a)(e,["spec"]),r=t.spec,c=Object(G.a)(t,["spec"]);return Object(l.b)(a,c)&&J.a.isSameSpec(n,r)}),z=Object(o.a)(function(e){return{wrapper:{height:150,"&::after":{display:"block",position:"absolute",width:146,backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75))",height:"75%",content:"''",bottom:0,alignSelf:"center"}},image:{overflow:"hidden",height:150,width:146},preview:{position:"relative",userSelect:"none",width:150,marginTop:5,marginLeft:"auto",marginRight:"auto",border:2,borderColor:function(e){return e?"#3caea3":"lightgrey"},borderStyle:"solid","&:hover":{borderColor:function(e){return e?"#3caea3":"darkgrey"}},"&:active":{borderColor:"grey"}},center:{position:"absolute",left:"50%",transform:"translate(-50%, 0)"},top:{position:"absolute",right:0,top:0,"& button":{marginRight:e.spacing(1),marginTop:e.spacing(1)}},bottom:{bottom:10,color:"white"}}}),Q=function(e){var t,n,c=e.spec,i=Object(a.useState)(!1),o=Object(s.a)(i,2),u=o[0],d=o[1],p=Object(a.useState)(""),m=Object(s.a)(p,2),b=m[0],g=m[1],y=Object(a.useState)(""),O=Object(s.a)(y,2),w=O[0],j=O[1],E=Object(a.useState)(!1),k=Object(s.a)(E,2),C=k[0],S=k[1],x=Object(l.c)(),N=Object(l.d)(function(e){return e.current.operands.includes(c.id)}),_=z(N),V=[["Data URL",(n=c.spec.data,"url"in n?n.url:"Embeded data")],["Mark Type",(t=c.spec.mark,"string"===typeof t?t:t.type)]];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{disableGutters:!0,className:_.preview,onClick:function(){C||x({type:"select-operand",operand:c.id})}},r.a.createElement($,{table:V},r.a.createElement("div",{className:_.wrapper},r.a.createElement("div",{className:_.image},r.a.createElement(U,{spec:c.spec,width:150,height:150})))),r.a.createElement("div",{className:_.top},r.a.createElement(q.a,{size:"small",color:"primary",onClick:function(){g(f()(c.spec)),j(c.alias),d(!0)}},r.a.createElement(v.a,null)),r.a.createElement(q.a,{size:"small",color:"secondary",onClick:function(){x({type:"delete-spec",id:c.id})},onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)}},r.a.createElement(h.a,null))),r.a.createElement("div",{className:_.center+" "+_.bottom},c.alias)),r.a.createElement(T,{showModal:u,setShowModal:d,onSuccess:function(e,t){x({type:"modify-spec",json:t,alias:e,id:c.id})},value:b,setValue:g,alias:w,setAlias:j}))},H=Object(o.a)(function(e){return{list:{overflowY:"auto",overflowX:"hidden",flexGrow:1,paddingTop:0,paddingBottom:0,display:"flex",flexDirection:"column",alignContent:"center"}}}),X=function(){var e=H(),t=Object(l.d)(function(e){return e.current.specs});return r.a.createElement(u.a,{className:e.list},t.map(function(e){return r.a.createElement(Q,{key:e.id,spec:e})}))},Y=n(326),K=n.n(Y),Z=Object(o.a)(function(e){return{button:{marginBottom:e.spacing(1)}}}),ee=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),o=Object(s.a)(i,2),u=o[0],d=o[1],f=Object(a.useState)(""),p=Object(s.a)(f,2),h=p[0],m=p[1],v=Object(l.c)(),b=Z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{onClick:function(){d(""),m("Untitled"),c(!0)},className:b.button},r.a.createElement(K.a,null)," \xa0 New Spec"),r.a.createElement(T,{showModal:n,setShowModal:c,onSuccess:function(e,t){v({type:"add-spec",json:t,alias:e})},value:u,setValue:d,alias:h,setAlias:m}))},te=n(327),ne=n.n(te)()(function(e){return{main:{padding:10,border:2,borderColor:function(e){return e?"#3caea3":"lightgrey"},borderStyle:"solid","&:hover":{borderColor:function(e){return e?"#3caea3":"darkgrey"}},"&:active":{borderColor:"grey"},backgroundColor:"white",display:"flex",justifyContent:"center",alignItems:"center"}}}),ae=function(e){return function(t){var n=t.view,a=n.id,c=Object(l.c)(),i=Object(l.d)(function(e){return e.current.operands.includes(a)}),o=ne(i);return r.a.createElement("div",{className:o.main,onClick:function(){c({type:"select-operand",operand:a})}},r.a.createElement(e,{view:n}))}},re=ae(function(e){var t=e.view;return r.a.createElement(U,{spec:t.export()})}),ce=ae(function(e){var t=e.view;return r.a.createElement(U,{spec:t.export()})}),ie=ae(function(e){var t=e.view;return r.a.createElement(U,{spec:t.export()})}),oe=ae(function(e){var t=e.view;return r.a.createElement(U,{spec:t.export()})}),le=ae(function(e){var t=e.view;return r.a.createElement(U,{spec:t.export()})}),ue=Object(o.a)(function(e){return{main:{backgroundColor:e.palette.grey[200],marginTop:e.spacing(1),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},emptyView:{color:"darkgrey",fontSize:20}}}),se=function(){var e=ue(),t=Object(l.d)(function(e){return e.current.tree});return r.a.createElement("div",{className:e.main},t?function(e){var t=function(){switch(e.type){case"unit":return re;case"layer":return ce;case"concat":return ie;case"facet":return oe;case"repeat":return le;default:throw new Error("".concat(e.type," view has not been implemented"))}}();return r.a.createElement(t,{view:e})}(t):r.a.createElement("div",{className:e.emptyView},"Empty View"))},de=n(328),fe=n.n(de),pe=n(329),he=n.n(pe),me=n(536),ve=n(218),be=n.n(ve),ge=n(69),ye=n(18),Oe=n(24),we=n(27),je=n(30),Ee=n(29),ke=n(31),Ce=n(118),Se=n(113),xe=n(330);function Ne(e,t,n){if(!(t in e&&n in e))throw new Error("from (=".concat(t,") or to (=").concat(n,") is out of arr bound (=[0,").concat(e.length-1,"])"));var a=e[t];if(t<n)for(var r=t;r<n;r++)e[r]=e[r+1];else for(var c=t;c>n;c--)e[c]=e[c-1];e[n]=a}function _e(e){var t=function e(t){if(Object(ge.f)(t))return t.data?[t.data]:[];if(Object(ge.e)(t)||Object(ge.b)(t))return[].concat(Object(ye.a)(e(t.spec)),Object(ye.a)(t.data?[t.data]:[]));var n=[];return Object(ge.d)(t)?n=t.layer:Object(Se.b)(t)?n=t.concat:Object(Se.c)(t)?n=t.hconcat:Object(Se.d)(t)&&(n=t.vconcat),[].concat(Object(ye.a)(n.map(function(t){return e(t)}).flat()),Object(ye.a)(t.data?[t.data]:[]))}(e);if(0===t.length)return!0;var n=t[0],a=!0,r=!1,c=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;if(!xe.a(l,n))return!0}}catch(u){r=!0,c=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return!1}function Ve(e){return function e(t){if(Object(ge.f)(t)){var n=t.data,a=Object(G.a)(t,["data"]);return{data:n?[n]:[],spec:a}}if(Object(ge.e)(t)||Object(ge.b)(t)){var r=t.data,c=e(t.spec),i=c.data,o=c.spec;return t.spec=o,{data:[].concat(Object(ye.a)(r?[r]:[]),Object(ye.a)(i)),spec:t}}var l="";Object(ge.d)(t)?l="layer":Object(Se.b)(t)?l="concat":Object(Se.c)(t)?l="hconcat":Object(Se.d)(t)&&(l="vconcat");var u=t.data;var s=u?[u]:[];for(var d=0;d<t[l].length;d++){var f=e(t[l][d]),p=f.data,h=f.spec;s.push.apply(s,Object(ye.a)(p)),t[l][d]=h}return{data:s,spec:t}}(Ie(e))}function Fe(e,t,n){if(e===n.id)return{parent:null,view:n};var a=!0,r=!1,c=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value.findView(e);if(null!==l)return null!==l.parent?l:Object(Ce.a)({},l,{parent:n})}}catch(u){r=!0,c=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return null}function Be(e,t,n){for(var a=0;a<t.length;a++)if(t[a].id===n)return t[a]=e,!0;return!1}function Ie(e){return JSON.parse(JSON.stringify(e))}var Me=1,Re=function(){function e(t){Object(Oe.a)(this,e),this._id=void 0,this._type=void 0,this._id=Me++,this._type=t}return Object(we.a)(e,[{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}}]),e}(),Ae=function(e){function t(){return Object(Oe.a)(this,t),Object(je.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(ke.a)(t,e),t}(Re),Te=function(e){function t(e){var n;return Object(Oe.a)(this,t),(n=Object(je.a)(this,Object(Ee.a)(t).call(this,"unit"))).spec=void 0,n.spec=e,n}return Object(ke.a)(t,e),Object(we.a)(t,[{key:"edit",value:function(e){this.spec=e}},{key:"export",value:function(){return Ie(this.spec)}},{key:"clone",value:function(){var e=new t(this.spec);return e._id=this._id,e}},{key:"deepClone",value:function(){var e=new t(Ie(this.spec));return e._id=this._id,e}},{key:"findView",value:function(e){return this._id===e?{parent:null,view:this}:null}},{key:"replaceChild",value:function(e,t){throw new Error("UnitView cannot replace child")}},{key:"getEncoding",value:function(){return this.spec.encoding}}]),t}(Re),We=function(e){function t(){var e;return Object(Oe.a)(this,t),(e=Object(je.a)(this,Object(Ee.a)(t).call(this,"layer"))).layer=void 0,e.layer=[],e}return Object(ke.a)(t,e),Object(we.a)(t,[{key:"export",value:function(){return{layer:this.layer.map(function(e){return e.export()})}}},{key:"append",value:function(e){this.layer.push(e)}},{key:"prepend",value:function(e){this.layer.unshift(e)}},{key:"remove",value:function(e){this.layer.splice(e,1)}},{key:"isCompatible",value:function(e){var t=e.export();return!t.spec&&!t.layer&&!t.concat&&!t.hconcat&&!t.vconcat}},{key:"rearrange",value:function(e,t){Ne(this.layer,e,t)}},{key:"clone",value:function(){var e=new t;return e._id=this._id,e.layer=Object(ye.a)(this.layer),e}},{key:"deepClone",value:function(){var e=new t;return e._id=this._id,e.layer=this.layer.map(function(e){return e.deepClone()}),e}},{key:"findView",value:function(e){return Fe(e,this.layer,this)}},{key:"replaceChild",value:function(e,t){return Be(e,this.layer,t)}},{key:"getEncoding",value:function(){return this.layer.map(function(e){return e.getEncoding()})}}]),t}(Ae),De=function(e,t){return function(n,a){e(Object(Ce.a)({type:"operate",operands:t,operator:n},a?{extra:a}:{}))}},$e=n(334),qe=n(533),Le=Object(o.a)(function(){return{buttonNormal:{},buttonWarn:{"&:hover":{backgroundColor:"#ffd800"}},error:{width:22,height:22,color:"#ed1c1c"}}}),Ge=function(e){var t=e.navBarOperands,n=e.mainViewOperands,c=Le(),i=Object(l.d)(function(e){return e.current.operands}),o=Object(l.d)(function(e){return e.current.tree}),u=Object(l.d)(function(e){return e.current.specs}),d=De(Object(l.c)(),i),f=Object(a.useState)(null),p=Object(s.a)(f,2),h=p[0],m=p[1],v=function(e,t,n,a){if(1!==e.length||1!==t.length||0!==n.filter(function(e){return t.includes(e.id)&&!Object(ge.f)(e.spec)}).length)return!0;var r=a.findView(e[0]);return null===r||!(r.view instanceof We)&&!Object(ge.f)(r.view.export())}(n,t,u,o),b=function(e,t,n,a,r){if(e)return!1;var c=[],i=!0,o=!1,l=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var d=u.value;n.includes(d.id)&&c.push(new Te(d.spec).getEncoding())}}catch(k){o=!0,l=k}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}var f=r.findView(a[0]).view,p=[];f instanceof Te?p=[f.getEncoding()]:f instanceof We&&(p=f.getEncoding());var h={},m=!0,v=!1,b=void 0;try{for(var g,y=c.concat(p)[Symbol.iterator]();!(m=(g=y.next()).done);m=!0)for(var O=g.value,w=0,j=Object.keys(O);w<j.length;w++){var E=j[w];if(E in h&&h[E]!==O[E].field)return!0;h[E]=O[E].field}}catch(k){v=!0,b=k}finally{try{m||null==y.return||y.return()}finally{if(v)throw b}}return!1}(v,u,t,n,o),y=function(e){return function(){O(),d("layer",e)}},O=function(){m(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{onClick:function(e){m(e.currentTarget)},disabled:v,className:b?c.buttonWarn:c.buttonNormal,"aria-owns":h?"layer-menu":void 0,"aria-haspopup":"true"},b?r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:c.error})," \xa0"):r.a.createElement(r.a.Fragment,null),"Layer"),r.a.createElement($e.a,{id:"layer-menu",anchorEl:h,open:Boolean(h),onClose:O},r.a.createElement(qe.a,{onClick:y("prepend")},"Under"),r.a.createElement(qe.a,{onClick:y("append")},"Over")))};var Je=function(e){var t=e.navBarOperands,n=e.mainViewOperands,a=Object(l.d)(function(e){return e.current.operands}),c=De(Object(l.c)(),a),i=1!==n.length||1!==t.length;return r.a.createElement(g.a,{onClick:function(){return c("concat")},disabled:i},"Concat")},Pe=n(534),Ue=n(547),ze=n(535),Qe=n(284);function He(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Xe=function(e){function t(e,n){var a;return Object(Oe.a)(this,t),(a=Object(je.a)(this,Object(Ee.a)(t).call(this,"repeat"))).repeatInfo=void 0,a.view=void 0,a.repeatInfo=n,a.view=e,a}return Object(ke.a)(t,e),Object(we.a)(t,[{key:"export",value:function(){return{repeat:this.repeatInfo.export(),spec:Ze(this.view.export(),this.repeatInfo)}}},{key:"addAxis",value:function(e,t){this.repeatInfo.addAxis(e,t)}},{key:"removeAxis",value:function(e){this.repeatInfo.removeAxis(e)}},{key:"append",value:function(e,t){this.repeatInfo.isRepeating(t)&&this.repeatInfo[t].push(e)}},{key:"prepend",value:function(e,t){this.repeatInfo.isRepeating(t)&&this.repeatInfo[t].unshift(e)}},{key:"remove",value:function(e,t){this.repeatInfo.remove(e,t)}},{key:"isCompatible",value:function(e){return!0}},{key:"rearrange",value:function(e,t,n){this.repeatInfo.isRepeating(n)&&Ne(this.repeatInfo[n],e,t)}},{key:"clone",value:function(){var e=new t(this.view,this.repeatInfo);return e._id=this._id,e}},{key:"deepClone",value:function(){var e=new t(this.view.deepClone(),this.repeatInfo.clone());return e._id=this._id,e}},{key:"findView",value:function(e){return Fe(e,[this.view],this)}},{key:"replaceChild",value:function(e,t){return this.view.id===t&&(this.view=e,!0)}}]),t}(Ae),Ye=function(){function e(t,n,a){Object(Oe.a)(this,e),this.row=void 0,this.column=void 0,this.rowChannel=void 0,this.columnChannel=void 0,this.row=a.rowChannel?t:[],this.column=a.columnChannel?n:[],this.rowChannel=a.rowChannel,this.columnChannel=a.columnChannel}return Object(we.a)(e,[{key:"repeat",value:function(e,t){this.isRepeating(e)||(this[e]=[],this["".concat(e,"Channel")]=t)}},{key:"isRepeating",value:function(e){return!!this["".concat(e,"Channel")]}},{key:"export",value:function(){return Object(Ce.a)({},this.isRepeating("row")?{row:Ie(this.row)}:{},this.isRepeating("column")?{column:Ie(this.column)}:{})}},{key:"remove",value:function(e,t){this[t].splice(e,1)}},{key:"addAxis",value:function(e,t){this[t]=[],this["".concat(t,"Channel")]=e}},{key:"removeAxis",value:function(e){this[e]=[],this["".concat(e,"Channel")]=void 0}},{key:"getChannelInfo",value:function(){return Object(Ce.a)({},this.rowChannel?{rowChannel:this.rowChannel}:{},this.columnChannel?{columnChannel:this.columnChannel}:{})}},{key:"clone",value:function(){return new e(this.row,this.column,Object(Ce.a)({},this.rowChannel?{rowChannel:this.rowChannel}:{},this.columnChannel?{columnChannel:this.columnChannel}:{}))}}]),e}(),Ke=["layer","concat","hconcat","vconcat","spec"];function Ze(e,t){var n=void 0;Ke.forEach(function(t){e[t]&&(n=t)});var a=Ie(e),r=a[n||"$invalid-vl-field$"],c=Object(G.a)(a,[n||"$invalid-vl-field$"].map(He));return n&&(c[n]=r.map(function(e){return Ze(e,t)})),c.encoding&&function(e,t){t.rowChannel&&e[t.rowChannel]&&(e[t.rowChannel].field={repeat:"row"});t.columnChannel&&e[t.columnChannel]&&(e[t.columnChannel].field={repeat:"column"})}(c.encoding,t),c}var et=Object(Qe.a)(function(){return{channelSelector:{minWidth:60},checkBox:{top:10}}});var tt=function(e){var t=e.isOpen,n=e.onClose,c=et(),i=Object(a.useState)(!1),o=Object(s.a)(i,2),u=o[0],d=o[1],f=Object(a.useState)(!1),p=Object(s.a)(f,2),h=p[0],m=p[1],v=Object(a.useState)([]),b=Object(s.a)(v,2),y=b[0],O=b[1],w=Object(a.useState)(""),j=Object(s.a)(w,2),k=j[0],C=j[1],F=Object(a.useState)(""),B=Object(s.a)(F,2),I=B[0],M=B[1],R=Object(a.useState)([]),A=Object(s.a)(R,2),T=A[0],W=A[1],D=Object(a.useState)(""),$=Object(s.a)(D,2),q=$[0],L=$[1],G=Object(a.useState)(""),J=Object(s.a)(G,2),P=J[0],U=J[1],z=Object(l.d)(function(e){return e.current.operands}),Q=De(Object(l.c)(),z),H=function(e,t){return function(n){t(n.target.value);try{var a=JSON.parse(n.target.value);e(function(e){if(!Array.isArray(e))return!1;var t=!0,n=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0)if("string"!==typeof r.value)return!1}catch(i){n=!0,a=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw a}}return!0}(a)?a:[])}catch(r){e([])}}};return r.a.createElement(N.a,{open:t,onEntering:function(){d(!1),m(!1),O([]),C(""),M(""),W([]),L(""),U("")},"aria-labelledby":"repeat-dialog-title"},r.a.createElement(_.a,{id:"repeat-dialog-title"},r.a.createElement(r.a.Fragment,null,"Repeat"),r.a.createElement(x.a,{onClick:n,style:{right:10,top:7,position:"absolute"}},r.a.createElement(E.a,null))),r.a.createElement(V.a,null,r.a.createElement(Pe.a,null,"Choose Field(s) and Encoding Channel(s) to repeat."),r.a.createElement("div",null,r.a.createElement(Ue.a,{checked:u,onChange:function(){return d(!u)},className:c.checkBox}),r.a.createElement(S.a,{label:"Row Fields",value:k,onChange:H(O,C)}),"\xa0 \xa0",r.a.createElement(S.a,{label:"Channel",value:I,onChange:function(e){return M(e.target.value)}})),r.a.createElement("div",null,r.a.createElement(Ue.a,{checked:h,onChange:function(){return m(!h)},className:c.checkBox}),r.a.createElement(S.a,{label:"Column Fields",value:q,onChange:H(W,L)}),"\xa0 \xa0",r.a.createElement(S.a,{label:"Channel",value:P,onChange:function(e){return U(e.target.value)}}))),r.a.createElement(ze.a,null,r.a.createElement(g.a,{onClick:function(){Q("repeat",new Ye(y,T,{rowChannel:I,columnChannel:P})),n()},autoFocus:!0,disabled:!(u&&0!==y.length&&""!==I)&&!(h&&0!==T.length&&""!==P)||u&&(0===y.length||""===I)||h&&(0===T.length||""===P)},"Operate")))},nt=function(e){var t=e.navBarOperands,n=e.mainViewOperands,c=e.tree,i=ft(),o=Object(a.useState)(!1),l=Object(s.a)(o,2),u=l[0],d=l[1],f=1!==n.length||t.length>0,p=function(){return!f&&_e(c.findView(n[0]).view.export())};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{onClick:function(){return d(!0)},disabled:f,className:p()?i.buttonWarn:i.buttonNormal},p()?r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:i.error})," \xa0"):r.a.createElement(r.a.Fragment,null),"Repeat"),r.a.createElement(tt,{isOpen:u,onClose:function(){return d(!1)}}))},at=function(e){function t(e,n){var a;return Object(Oe.a)(this,t),(a=Object(je.a)(this,Object(Ee.a)(t).call(this,"facet"))).view=void 0,a.facet=void 0,a.facet=n,a.view=e,a}return Object(ke.a)(t,e),Object(we.a)(t,[{key:"export",value:function(){var e=Ve(this.view.export()),t=e.data,n=Object(G.a)(e,["data"]);return Object(Ce.a)({data:t[0],facet:this.facet.export()},n)}},{key:"append",value:function(e,t){this.facet.column?this.facet.row||(this.facet.row=t):this.facet.column=t}},{key:"prepend",value:function(){throw new Error("prepend is not supported for FacetView")}},{key:"remove",value:function(e,t){this.facet.remove(t)}},{key:"isCompatible",value:function(e){return!0}},{key:"rearrange",value:function(){this.facet.row&&this.facet.column&&this.facet.swapAxis()}},{key:"clone",value:function(){var e=new t(this.view,this.facet);return e._id=this._id,e}},{key:"deepClone",value:function(){var e=new t(this.view.deepClone(),this.facet.clone());return e._id=this._id,e}},{key:"findView",value:function(e){return Fe(e,[this.view],this)}},{key:"replaceChild",value:function(e,t){return this.view.id===t&&(this.view=e,!0)}}]),t}(Ae),rt=function(){function e(t){Object(Oe.a)(this,e),this.row=void 0,this.column=void 0,this.row=t.row,this.column=t.column}return Object(we.a)(e,[{key:"export",value:function(){return Object(Ce.a)({},this.row?{row:this.row}:{},this.column?{column:this.column}:{})}},{key:"swapAxis",value:function(){var e=[this.column,this.row];this.row=e[0],this.column=e[1]}},{key:"remove",value:function(e){this[e]=void 0}},{key:"clone",value:function(){return new e(Object(Ce.a)({},this.row?{row:Ie(this.row)}:{},this.column?{column:Ie(this.column)}:{}))}}]),e}(),ct=n(526),it=n(549),ot=n(546),lt=Object(Qe.a)(function(){return{typeSelector:{minWidth:60},checkBox:{top:10}}}),ut=function(e){var t=e.isOpen,n=e.onClose,c=lt(),i=Object(a.useState)(!1),o=Object(s.a)(i,2),u=o[0],d=o[1],f=Object(a.useState)(!1),p=Object(s.a)(f,2),h=p[0],m=p[1],v=Object(a.useState)(""),b=Object(s.a)(v,2),y=b[0],O=b[1],w=Object(a.useState)(""),j=Object(s.a)(w,2),k=j[0],C=j[1],F=Object(a.useState)(""),B=Object(s.a)(F,2),I=B[0],M=B[1],R=Object(a.useState)(""),A=Object(s.a)(R,2),T=A[0],W=A[1],D=Object(l.d)(function(e){return e.current.operands}),$=De(Object(l.c)(),D);return r.a.createElement(N.a,{open:t,onEntering:function(){d(!1),m(!1),O(""),C(""),M(""),W("")},"aria-labelledby":"facet-dialog-title"},r.a.createElement(_.a,{id:"facet-dialog-title"},r.a.createElement(r.a.Fragment,null,"Facet"),r.a.createElement(x.a,{onClick:n,style:{right:10,top:7,position:"absolute"}},r.a.createElement(E.a,null))),r.a.createElement(V.a,null,r.a.createElement(Pe.a,null,"Choose Field(s) and Type(s) to facet."),r.a.createElement("div",null,r.a.createElement(Ue.a,{checked:u,onChange:function(){return d(!u)},className:c.checkBox}),r.a.createElement(S.a,{label:"Row Field",value:y,onChange:function(e){return O(e.target.value)}}),"\xa0 \xa0",r.a.createElement(ct.a,null,r.a.createElement(it.a,{htmlFor:"row-type"},"Type"),r.a.createElement(ot.a,{value:k,onChange:function(e){return C(e.target.value)},inputProps:{name:"type",id:"row-type"},className:c.typeSelector},r.a.createElement(qe.a,{value:"nominal"},"Nominal"),r.a.createElement(qe.a,{value:"ordinal"},"Ordinal"),r.a.createElement(qe.a,{value:"quantitative"},"Quantitative"),r.a.createElement(qe.a,{value:"temporal"},"Temporal")))),r.a.createElement("div",null,r.a.createElement(Ue.a,{checked:h,onChange:function(){return m(!h)},className:c.checkBox}),r.a.createElement(S.a,{label:"Column Field",value:I,onChange:function(e){return M(e.target.value)}}),"\xa0 \xa0",r.a.createElement(ct.a,null,r.a.createElement(it.a,{htmlFor:"column-type"},"Type"),r.a.createElement(ot.a,{value:T,onChange:function(e){return W(e.target.value)},inputProps:{name:"type",id:"column-type"},className:c.typeSelector},r.a.createElement(qe.a,{value:"nominal"},"Nominal"),r.a.createElement(qe.a,{value:"ordinal"},"Ordinal"),r.a.createElement(qe.a,{value:"quantitative"},"Quantitative"),r.a.createElement(qe.a,{value:"temporal"},"Temporal"))))),r.a.createElement(ze.a,null,r.a.createElement(g.a,{onClick:function(){$("facet",new rt(Object(Ce.a)({},h?{column:{field:I,type:T}}:{},u?{row:{field:y,type:k}}:{}))),n()},autoFocus:!0,disabled:!(u&&""!==y&&""!==k)&&!(h&&""!==I&&""!==T)||u&&(""===y||""===k)||h&&(""===I||""===T)},"Operate")))},st=function(e){var t=e.navBarOperands,n=e.mainViewOperands,c=e.tree,i=ft(),o=Object(a.useState)(!1),l=Object(s.a)(o,2),u=l[0],d=l[1],f=1!==n.length||t.length>0,p=function(){return!f&&_e(c.findView(n[0]).view.export())};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{onClick:function(){return d(!0)},disabled:f,className:p()?i.buttonWarn:i.buttonNormal},p()?r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:i.error})," \xa0"):r.a.createElement(r.a.Fragment,null),"Facet"),r.a.createElement(ut,{isOpen:u,onClose:function(){return d(!1)}}))},dt=function(e){var t=e.navBarOperands,n=e.mainViewOperands,a=Object(l.d)(function(e){return e.current.operands}),c=Object(l.d)(function(e){return e.current.tree}),i=De(Object(l.c)(),a),o=null!==c||n.length>0||1!==t.length;return r.a.createElement(g.a,{onClick:function(){return i("place")},disabled:o},"Place")},ft=Object(o.a)(function(){return{buttonNormal:{},buttonWarn:{"&:hover":{backgroundColor:"#ffd800"}},error:{width:22,height:22,color:"#ed1c1c"}}}),pt=function(){var e=Object(l.c)(),t=Object(l.d)(function(e){return e.current.operands}),n=Object(l.d)(function(e){return e.current.tree}),a=Object(l.d)(function(e){return 0===e.undoStack.length}),c=Object(l.d)(function(e){return 0===e.redoStack.length}),i=t.filter(function(e){return e<0}),o=t.filter(function(e){return e>0});return r.a.createElement(me.a,{container:!0,justify:"space-between"},r.a.createElement(me.a,{item:!0},r.a.createElement(Ge,{navBarOperands:i,mainViewOperands:o}),r.a.createElement(Je,{navBarOperands:i,mainViewOperands:o}),r.a.createElement(nt,{navBarOperands:i,mainViewOperands:o,tree:n}),r.a.createElement(st,{navBarOperands:i,mainViewOperands:o,tree:n}),r.a.createElement(dt,{navBarOperands:i,mainViewOperands:o})),r.a.createElement(me.a,{item:!0},r.a.createElement(g.a,{onClick:function(){return e({type:"undo"})},disabled:a},r.a.createElement(fe.a,null)," \xa0 Undo"),r.a.createElement(g.a,{onClick:function(){return e({type:"redo"})},disabled:c},r.a.createElement(he.a,null)," \xa0 Redo")))},ht=n(249),mt=n(537),vt=n(538),bt=n(539),gt=n(544),yt=n(332),Ot=n(541),wt=n(331),jt=n(542),Et=n(540),kt=n(32),Ct=function(e){function t(e){var n;return Object(Oe.a)(this,t),(n=Object(je.a)(this,Object(Ee.a)(t).call(this,"concat"))).concat=void 0,n.orient=void 0,n.concat=[],n.orient=e,n}return Object(ke.a)(t,e),Object(we.a)(t,[{key:"export",value:function(){return Object(kt.a)({},this.orient+"concat",this.concat.map(function(e){return e.export()}))}},{key:"append",value:function(e){this.concat.push(e)}},{key:"prepend",value:function(e){this.concat.unshift(e)}},{key:"remove",value:function(e){this.concat.splice(e,1)}},{key:"isCompatible",value:function(e){return!0}},{key:"rearrange",value:function(e,t){Ne(this.concat,e,t)}},{key:"clone",value:function(){var e=new t(this.orient);return e._id=this._id,e.concat=Object(ye.a)(this.concat),e}},{key:"deepClone",value:function(){var e=new t(this.orient);return e._id=this._id,e.concat=this.concat.map(function(e){return e.deepClone()}),e}},{key:"findView",value:function(e){return Fe(e,this.concat,this)}},{key:"replaceChild",value:function(e,t){return Be(e,this.concat,t)}}]),t}(Ae),St=function(e,t){return{current:t(e.current),undoStack:mt.a(e.current,e.undoStack),redoStack:[]}},xt={current:{specs:[],lastSpecId:-1,operands:[],tree:null},undoStack:[],redoStack:[]},Nt=Object(ht.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"add-spec":return St(e,function(e){var n=e.specs,a=e.lastSpecId,r=Object(G.a)(e,["specs","lastSpecId"]);return Object(Ce.a)({specs:vt.a({id:a,spec:t.json,alias:t.alias},n),lastSpecId:a-1},r)});case"modify-spec":return St(e,bt.a(gt.a("specs"),yt.a(function(e){return e.id===t.id?{id:t.id,spec:t.json,alias:t.alias}:e})));case"delete-spec":return St(e,Ot.a(bt.a(gt.a("specs"),wt.a(function(e){return e.id!==t.id})),bt.a(gt.a("operands"),function(e){return e.filter(function(e){return e!==t.id})})));case"undo":var n=e.current,a=e.undoStack,r=e.redoStack;return a.length>0?{redoStack:mt.a(n,r),current:a[0],undoStack:a.slice(1)}:e;case"redo":var c=e.current,i=e.undoStack,o=e.redoStack;return o.length>0?{redoStack:o.slice(1),current:o[0],undoStack:mt.a(c,i)}:e;case"select-operand":return St(e,bt.a(gt.a("operands"),function(e){return e.includes(t.operand)?jt.a([t.operand],e):vt.a(t.operand,e)}));case"operate":return St(e,Ot.a(bt.a(gt.a("tree"),function(n){var a=function(t){return e.current.specs.find(function(e){return e.id===t}).spec},r=t.operands.filter(function(e){return e<0}),c=t.operands.filter(function(e){return e>0});if("place"===t.operator)return new Te(a(r[0]));var i=n.deepClone(),o=i.findView(c[0]);if(null===o)throw new Error("Cannot find view in MainView with id=".concat(c[0]));var l=o.parent,u=o.view;switch(t.operator){case"layer":var s=new Te(a(r[0])),d=u.id;if(u instanceof Te){var f=new We;f.append(u),u=f}u[t.extra](s),l?l.replaceChild(u,d):i=u;break;case"concat":var p=new Te(a(r[0])),h=u.id;if(!(u instanceof Ct)){var m=new Ct("h");m.append(u),u=m}u.append(p),l?l.replaceChild(u,h):i=u;break;case"repeat":var v=new Xe(u,t.extra);l?l.replaceChild(v,u.id):i=v;break;case"facet":var b=new at(u,t.extra);l?l.replaceChild(b,u.id):i=b;break;default:return function(e){throw new Error("Unexpected object: "+e)}(t.operator)}return i}),bt.a(gt.a("operands"),Et.a([]))));default:return e}}),_t=Object(o.a)(function(e){return{root:{height:600,display:"flex"},left:{height:"100%",display:"flex",flexDirection:"column",width:150,marginRight:e.spacing(1)},right:{flexGrow:1,display:"flex",flexDirection:"column"}}}),Vt=function(){var e=_t();return r.a.createElement(l.a,{store:Nt},r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.left},r.a.createElement(ee,null),r.a.createElement(X,null)),r.a.createElement("div",{className:e.right},r.a.createElement(pt,null),r.a.createElement(se,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[346,1,2]]]);
//# sourceMappingURL=main.7ab12244.chunk.js.map