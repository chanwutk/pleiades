(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{300:function(e,t,a){e.exports=a(416)},305:function(e,t,a){},416:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(75),o=a.n(c),l=(a(305),a(52)),i=a(470),s=a(475),u=a(225),d=a.n(u),p=a(287),m=a.n(p),f=a(286),g=a.n(f),b=a(252),h=a(476),v=function(e){return{tag:"failure",value:e}},E=a(279),w=a.n(E),y=a(283),j=a.n(y),k=a(282),O=a.n(k),S=a(486),C=a(477),x=a(491),N=a(492),M=a(478),I=a(265);!function e(t){if("object"===typeof t&&null!==t)for(var a in t.description&&(t.markdownDescription=t.description),t)t.hasOwnProperty(a)&&(t[a]=e(t[a]));return t}(I);var B=Object(i.a)(function(e){return{textField:{marginTop:e.spacing(0),marginBottom:e.spacing(4),width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},errorMessage:{fontStyle:"italic",color:"red"}}}),D=[{schema:I,uri:"https://vega.github.io/schema/vega-lite/v3.json"}],R=function(e){var t=e.isOpen,a=e.onClose,n=e.value,c=e.onChange,o=e.alias,l=e.setAlias,i=e.errorMsg,s=e.extras,u=B();return r.a.createElement(x.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0},r.a.createElement(N.a,{disableTypography:!0},r.a.createElement(S.a,{id:"standard-name",label:"Name",className:u.textField,value:o,onChange:function(e){return l(e.target.value)},margin:"normal"}),r.a.createElement(h.a,{onClick:function(){return a(!0)}},r.a.createElement(O.a,null),"\xa0 Save"),s,r.a.createElement(C.a,{className:u.closeButton,onClick:function(){return a(!1)}},r.a.createElement(j.a,null))),r.a.createElement(M.a,null,r.a.createElement("div",{className:"editor"},r.a.createElement(w.a,{language:"json",value:n,height:400,onChange:c,editorDidMount:function(e){e.focus()},editorWillMount:function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!1,enableSchemaRequest:!0,schemas:D,validate:!0})},options:{automaticLayout:!0,cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})),r.a.createElement("span",{className:u.errorMessage},null!==i?r.a.createElement(r.a.Fragment,null,i," \xa0"):null)))},T=[{data:{url:"https://vega.github.io/editor/data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Miles_per_Gallon",type:"quantitative"}}},{data:{url:"https://vega.github.io/editor/data/population.json"},transform:[{filter:"datum.year == 2000"}],mark:"bar",encoding:{y:{field:"age",type:"ordinal",scale:{rangeStep:17}},x:{aggregate:"sum",field:"people",type:"quantitative",axis:{title:"population"}}}}],A=function(e){try{var t=JSON.parse(e);return"data"in t&&"url"in t.data?(b.a(t),{tag:"success",value:t}):v("data field must exist and must be url.")}catch(a){return v(a.message)}},F=function(e){var t=e.showModal,a=e.setShowModal,c=e.value,o=e.setValue,i=e.alias,s=e.setAlias,u=e.onSuccess,p=Object(n.useState)(""),m=Object(l.a)(p,2),f=m[0],g=m[1],b=T.map(function(e,t){return r.a.createElement(h.a,{key:t,onClick:function(){return o(d()(e))}},"Example ",t+1)});return r.a.createElement(R,{isOpen:t,onClose:function(e){if(!e)return g(""),void a(!1);var t=A(c);switch(t.tag){case"success":return g(""),u(i,t.value),void a(!1);case"failure":return void g(t.value)}},value:c,onChange:function(e){var t=A(e);switch(t.tag){case"success":g("");break;case"failure":g(t.value)}o(e)},alias:i,setAlias:s,errorMsg:f,extras:b})},L=a(493),W=Object(i.a)(function(e){return{keyColumn:{textAlign:"right"}}}),G=function(e){var t=e.table,a=e.children,n=W(),c=r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:n.keyColumn},r.a.createElement("strong",null,a),":"),r.a.createElement("td",null,c))})));return r.a.createElement(L.a,{placement:"top",title:c},a)},J=a(480),q=a(479),U=r.a.createContext(null),V=a(221),P=a(285),z=a.n(P),_=a(219),H=a(293),X=r.a.memo(H.a,function(e,t){var a=e.spec,n=Object(V.a)(e,["spec"]),r=t.spec,c=Object(V.a)(t,["spec"]);return z()(n,c)&&_.a.isSameSpec(a,r)}),Y=Object(i.a)(function(e){return{wrapper:{height:150,"&::after":{display:"block",position:"absolute",width:146,backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75))",height:"75%",content:"''",bottom:0,alignSelf:"center"}},image:{overflow:"hidden",height:150,width:146},preview:{position:"relative",userSelect:"none",width:150,marginTop:5,marginLeft:"auto",marginRight:"auto",border:2,borderColor:function(e){return e?"#3caea3":"lightgrey"},borderStyle:"solid","&:hover":{borderColor:function(e){return e?"#3caea3":"darkgrey"}},"&:active":{borderColor:function(e){return"grey"}}},center:{position:"absolute",left:"50%",transform:"translate(-50%, 0)"},top:{position:"absolute",right:0,top:0,"& button":{marginRight:e.spacing(1),marginTop:e.spacing(1)}},bottom:{bottom:10,color:"white"}}}),$=function(e){var t=e.spec,a=e.operand1Id,c=e.active,o=Object(n.useState)(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],p=Object(n.useState)(""),f=Object(l.a)(p,2),b=f[0],h=f[1],v=Object(n.useState)(""),E=Object(l.a)(v,2),w=E[0],y=E[1],j=Object(n.useContext)(U),k=Y(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{disableGutters:!0,className:k.preview,onClick:function(){var e=t.id;j({type:"select-operand1",id:e===a?null:e})}},r.a.createElement(G,{table:[["Data URL",t.spec.data.url],["Mark Type",t.spec.mark]]},r.a.createElement("div",{className:k.wrapper},r.a.createElement("div",{className:k.image},r.a.createElement(X,{spec:t.spec,width:150,height:150})))),r.a.createElement("div",{className:k.top},r.a.createElement(J.a,{size:"small",color:"primary",onClick:function(){h(d()(t.spec)),y(t.alias),u(!0)}},r.a.createElement(g.a,null)),r.a.createElement(J.a,{size:"small",color:"secondary",onClick:function(){j({type:"delete-spec",id:t.id})}},r.a.createElement(m.a,null))),r.a.createElement("div",{className:k.center+" "+k.bottom},t.alias)),r.a.createElement(F,{showModal:s,setShowModal:u,onSuccess:function(e,a){j({type:"modify-spec",json:a,alias:e,id:t.id})},value:b,setValue:h,alias:w,setAlias:y}))},K=Object(i.a)(function(e){return{list:{overflowY:"auto",overflowX:"hidden",flexGrow:1,paddingTop:0,paddingBottom:0,display:"flex",flexDirection:"column",alignContent:"center"}}}),Q=function(e){var t=e.currentState,a=K();return r.a.createElement(s.a,{className:a.list},t.specs.map(function(e){return r.a.createElement($,{key:e.id,spec:e,operand1Id:t.operand1Id,active:e.id===t.operand1Id})}))},Z=a(288),ee=a.n(Z),te=Object(i.a)(function(e){return{button:{marginBottom:e.spacing(1)}}}),ae=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(n.useState)(""),p=Object(l.a)(d,2),m=p[0],f=p[1],g=Object(n.useContext)(U),b=te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){u(""),f("Untitled"),c(!0)},className:b.button},r.a.createElement(ee.a,null)," \xa0 New Spec"),r.a.createElement(F,{showModal:a,setShowModal:c,onSuccess:function(e,t){g({type:"add-spec",json:t,alias:e})},value:s,setValue:u,alias:m,setAlias:f}))},ne=Object(i.a)(function(e){return{main:{backgroundColor:e.palette.grey[200],marginTop:e.spacing(1),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"}}}),re=function(e){var t=e.view,a=ne();return r.a.createElement("div",{className:a.main},t?r.a.createElement(X,{spec:t.export()}):"Empty View")},ce=a(289),oe=a.n(ce),le=a(290),ie=a.n(le),se=a(481),ue=function(e){var t=e.specs,a=e.operand1Id,c=e.operand2,o=e.result,l=Object(n.useContext)(U),i=function(e){t.forEach(function(t){t.id===a&&l({type:"operate",operand1:t.spec,operand2:c,operator:e})})},s=null===a||null===c,u=null===a||null===c,d=null!==a||null===c,p=null!==a||null===c,m=null===a||null!==c||null!==o;return r.a.createElement(se.a,{container:!0,justify:"space-between"},r.a.createElement(se.a,{item:!0},r.a.createElement(h.a,{onClick:function(){return i("layer")},disabled:s},"Layer"),r.a.createElement(h.a,{onClick:function(){return i("concat")},disabled:u},"Concat"),r.a.createElement(h.a,{onClick:function(){return i("repeat")},disabled:d},"Repeat"),r.a.createElement(h.a,{onClick:function(){return i("facet")},disabled:p},"Facet"),r.a.createElement(h.a,{onClick:function(){return i("place")},disabled:m},"Place")),r.a.createElement(se.a,{item:!0},r.a.createElement(h.a,{onClick:function(){return l({type:"undo"})}},r.a.createElement(oe.a,null)," \xa0 Undo"),r.a.createElement(h.a,{onClick:function(){return l({type:"redo"})}},r.a.createElement(ie.a,null)," \xa0 Redo")))},de=a(291),pe=a(482),me=a(483),fe=a(484),ge=a(489),be=a(292),he=a(487),ve=a(490),Ee=a(485),we=a(31),ye=a(29),je=a(32),ke=a(25),Oe=a(27);function Se(e){return JSON.parse(JSON.stringify(e))}var Ce=function(e){function t(e){return Object(ke.a)(this,t),Object(we.a)(this,Object(ye.a)(t).call(this,e))}return Object(je.a)(t,e),t}(function(){function e(t){Object(ke.a)(this,e),this.view=void 0,this.view=t}return Object(Oe.a)(e,[{key:"export",value:function(){return this.view.export()}}]),e}()),xe=function(){function e(t){Object(ke.a)(this,e),this.spec=void 0,this.spec=Se(t)}return Object(Oe.a)(e,[{key:"edit",value:function(e){this.spec=Se(e)}},{key:"export",value:function(){return Se(this.spec)}}]),e}(),Ne=function(e,t){return{current:t(e.current),undoStack:pe.a(e.current,e.undoStack),redoStack:[]}},Me=function(e,t){switch(t.type){case"add-spec":return Ne(e,function(e){var a=e.specs,n=e.specCount,r=Object(V.a)(e,["specs","specCount"]);return Object(de.a)({specs:me.a({id:n,spec:t.json,alias:t.alias},a),specCount:n+1},r)});case"modify-spec":return Ne(e,fe.a(ge.a("specs"),be.a(function(e){return e.id===t.id?{id:t.id,spec:t.json,alias:t.alias}:e})));case"delete-spec":return Ne(e,he.a(fe.a(ge.a("specs"),ve.a(function(e){return e.id!==t.id})),fe.a(ge.a("operand1Id"),function(e){return e===t.id?null:e})));case"undo":var a=e.current,n=e.undoStack,r=e.redoStack;return n.length>0?{redoStack:pe.a(a,r),current:n[0],undoStack:n.slice(1)}:e;case"redo":var c=e.current,o=e.undoStack,l=e.redoStack;return l.length>0?{redoStack:l.slice(1),current:l[0],undoStack:pe.a(c,o)}:e;case"select-operand1":return Ne(e,fe.a(ge.a("operand1Id"),Ee.a(t.id)));case"select-operand2":return Ne(e,fe.a(ge.a("operand2"),Ee.a(t.operand)));case"operate":return Ne(e,he.a(fe.a(ge.a("result"),function(e){switch(t.operator){case"place":return new Ce(new xe(t.operand1));case"layer":case"concat":case"repeat":case"facet":return e;default:return function(e){throw new Error("Unexpected object: "+e)}(t.operator)}}),fe.a(ge.a("operand1Id"),Ee.a(null)),fe.a(ge.a("operand2"),Ee.a(null))));default:throw new Error("impossible")}},Ie={current:{specs:[],specCount:0,operand1Id:null,operand2:null,result:null},undoStack:[],redoStack:[]},Be=Object(i.a)(function(e){return{root:{height:600,display:"flex"},left:{height:"100%",display:"flex",flexDirection:"column",width:150,marginRight:e.spacing(1)},right:{flexGrow:1,display:"flex",flexDirection:"column"}}}),De=function(){var e=Object(n.useReducer)(Me,Ie),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Be();return r.a.createElement(U.Provider,{value:c},r.a.createElement("div",{className:o.root},r.a.createElement("div",{className:o.left},r.a.createElement(ae,null),r.a.createElement(Q,{currentState:a.current})),r.a.createElement("div",{className:o.right},r.a.createElement(ue,{specs:a.current.specs,operand1Id:a.current.operand1Id,operand2:a.current.operand2,result:a.current.result}),r.a.createElement(re,{view:a.current.result}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[300,1,2]]]);
//# sourceMappingURL=main.09287a96.chunk.js.map