(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{318:function(e,t,a){e.exports=a(451)},323:function(e,t,a){},451:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),o=a(76),c=a.n(o),i=(a(323),a(52)),l=a(496),u=a(500),s=a(231),d=a.n(s),p=a(304),m=a.n(p),f=a(303),g=a.n(f),v=a(261),h=a(501),b=function(e){return{tag:"failure",value:e}},y=a(297),w=a.n(y),E=a(300),k=a.n(E),j=a(299),C=a.n(j),O=a(511),S=a(502),x=a(517),N=a(518),I=a(503),M=a(283);!function e(t){if("object"===typeof t&&null!==t)for(var a in t.description&&(t.markdownDescription=t.description),t)t.hasOwnProperty(a)&&(t[a]=e(t[a]));return t}(M);var T=Object(l.a)(function(e){return{textField:{marginTop:e.spacing(0),marginBottom:e.spacing(4),width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},errorMessage:{fontStyle:"italic",color:"red"}}}),B=[{schema:M,uri:"https://vega.github.io/schema/vega-lite/v3.json"}],D=function(e){var t=e.isOpen,a=e.onClose,n=e.value,o=e.onChange,c=e.alias,i=e.setAlias,l=e.errorMsg,u=e.extras,s=T();return r.a.createElement(x.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0},r.a.createElement(N.a,{disableTypography:!0},r.a.createElement(O.a,{id:"standard-name",label:"Name",className:s.textField,value:c,onChange:function(e){return i(e.target.value)},margin:"normal"}),r.a.createElement(h.a,{onClick:function(){return a(!0)}},r.a.createElement(C.a,null),"\xa0 Save"),u,r.a.createElement(S.a,{className:s.closeButton,onClick:function(){return a(!1)}},r.a.createElement(k.a,null))),r.a.createElement(I.a,null,r.a.createElement("div",{className:"editor"},r.a.createElement(w.a,{language:"json",value:n,height:400,onChange:o,editorDidMount:function(e){e.focus()},editorWillMount:function(e){e.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!1,enableSchemaRequest:!0,schemas:B,validate:!0})},options:{automaticLayout:!0,cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})),r.a.createElement("span",{className:s.errorMessage},null!==l?r.a.createElement(r.a.Fragment,null,l," \xa0"):null)))},R=[{$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{url:"https://vega.github.io/editor/data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Miles_per_Gallon",type:"quantitative"}}},{$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{url:"https://vega.github.io/editor/data/population.json"},transform:[{filter:"datum.year == 2000"}],mark:"bar",encoding:{y:{field:"age",type:"ordinal",scale:{rangeStep:17}},x:{aggregate:"sum",field:"people",type:"quantitative",axis:{title:"population"}}}}],A=function(e){try{var t=JSON.parse(e);return"data"in t&&("url"in t.data||"values"in t.data)?(v.a(t),{tag:"success",value:t}):b("data field must exist and must be url.")}catch(a){return b(a.message)}},F=function(e){var t=e.showModal,a=e.setShowModal,o=e.value,c=e.setValue,l=e.alias,u=e.setAlias,s=e.onSuccess,p=Object(n.useState)(""),m=Object(i.a)(p,2),f=m[0],g=m[1],v=R.map(function(e,t){return r.a.createElement(h.a,{key:t,onClick:function(){return c(d()(e))}},"Example ",t+1)});return r.a.createElement(D,{isOpen:t,onClose:function(e){if(!e)return g(""),void a(!1);var t=A(o);switch(t.tag){case"success":return g(""),s(l,t.value),void a(!1);case"failure":return void g(t.value)}},value:o,onChange:function(e){c(e);var t=A(e);switch(t.tag){case"success":g("");break;case"failure":g(t.value)}},alias:l,setAlias:u,errorMsg:f,extras:v})},L=a(519),W=Object(l.a)(function(e){return{keyColumn:{textAlign:"right"}}}),G=function(e){var t=e.table,a=e.children,n=W(),o=r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){var t=Object(i.a)(e,2),a=t[0],o=t[1];return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:n.keyColumn},r.a.createElement("strong",null,a),":"),r.a.createElement("td",null,o))})));return r.a.createElement(L.a,{placement:"top",title:o},a)},J=a(505),q=a(504),U=r.a.createContext(null),V=a(224),P=a(302),$=a.n(P),z=a(222),_=a(311),H=r.a.memo(_.a,function(e,t){var a=e.spec,n=Object(V.a)(e,["spec"]),r=t.spec,o=Object(V.a)(t,["spec"]);return $()(n,o)&&z.a.isSameSpec(a,r)}),X=Object(l.a)(function(e){return{wrapper:{height:150,"&::after":{display:"block",position:"absolute",width:146,backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75))",height:"75%",content:"''",bottom:0,alignSelf:"center"}},image:{overflow:"hidden",height:150,width:146},preview:{position:"relative",userSelect:"none",width:150,marginTop:5,marginLeft:"auto",marginRight:"auto",border:2,borderColor:function(e){return e?"#3caea3":"lightgrey"},borderStyle:"solid","&:hover":{borderColor:function(e){return e?"#3caea3":"darkgrey"}},"&:active":{borderColor:function(e){return"grey"}}},center:{position:"absolute",left:"50%",transform:"translate(-50%, 0)"},top:{position:"absolute",right:0,top:0,"& button":{marginRight:e.spacing(1),marginTop:e.spacing(1)}},bottom:{bottom:10,color:"white"}}}),Y=function(e){var t=e.spec,a=e.operand1Id,o=e.active,c=Object(n.useState)(!1),l=Object(i.a)(c,2),u=l[0],s=l[1],p=Object(n.useState)(""),f=Object(i.a)(p,2),v=f[0],h=f[1],b=Object(n.useState)(""),y=Object(i.a)(b,2),w=y[0],E=y[1],k=Object(n.useContext)(U),j=X(o);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{disableGutters:!0,className:j.preview,onClick:function(){var e=t.id;k({type:"select-operand1",id:e===a?null:e})}},r.a.createElement(G,{table:[["Data URL",t.spec.data.url],["Mark Type",t.spec.mark]]},r.a.createElement("div",{className:j.wrapper},r.a.createElement("div",{className:j.image},r.a.createElement(H,{spec:t.spec,width:150,height:150})))),r.a.createElement("div",{className:j.top},r.a.createElement(J.a,{size:"small",color:"primary",onClick:function(){h(d()(t.spec)),E(t.alias),s(!0)}},r.a.createElement(g.a,null)),r.a.createElement(J.a,{size:"small",color:"secondary",onClick:function(){k({type:"delete-spec",id:t.id})}},r.a.createElement(m.a,null))),r.a.createElement("div",{className:j.center+" "+j.bottom},t.alias)),r.a.createElement(F,{showModal:u,setShowModal:s,onSuccess:function(e,a){k({type:"modify-spec",json:a,alias:e,id:t.id})},value:v,setValue:h,alias:w,setAlias:E}))},K=Object(l.a)(function(e){return{list:{overflowY:"auto",overflowX:"hidden",flexGrow:1,paddingTop:0,paddingBottom:0,display:"flex",flexDirection:"column",alignContent:"center"}}}),Q=function(e){var t=e.currentState,a=K();return r.a.createElement(u.a,{className:a.list},t.specs.map(function(e){return r.a.createElement(Y,{key:e.id,spec:e,operand1Id:t.operand1Id,active:e.id===t.operand1Id})}))},Z=a(305),ee=a.n(Z),te=Object(l.a)(function(e){return{button:{marginBottom:e.spacing(1)}}}),ae=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(i.a)(c,2),u=l[0],s=l[1],d=Object(n.useState)(""),p=Object(i.a)(d,2),m=p[0],f=p[1],g=Object(n.useContext)(U),v=te();return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{onClick:function(){s(""),f("Untitled"),o(!0)},className:v.button},r.a.createElement(ee.a,null)," \xa0 New Spec"),r.a.createElement(F,{showModal:a,setShowModal:o,onSuccess:function(e,t){g({type:"add-spec",json:t,alias:e})},value:u,setValue:s,alias:m,setAlias:f}))},ne=a(306),re=a.n(ne)()(function(e){return{main:{padding:10,border:2,borderColor:function(e){return e?"#3caea3":"lightgrey"},borderStyle:"solid","&:hover":{borderColor:function(e){return e?"#3caea3":"darkgrey"}},"&:active":{borderColor:function(e){return"grey"}},backgroundColor:"white",display:"flex",justifyContent:"center",alignItems:"center"}}}),oe=function(e){var t=e.view,a=e.operand2,o=Object(n.useContext)(U),c=re(t===a);return r.a.createElement("div",{className:c.main,onClick:function(){o({type:"select-operand2",operand:t===a?null:t})}},r.a.createElement(H,{spec:t.export()}))},ce=function(e){var t=e.view,a=e.operand2,o=Object(n.useContext)(U),c=re(t===a);return r.a.createElement("div",{className:c.main,onClick:function(){o({type:"select-operand2",operand:t===a?null:t})}},r.a.createElement(H,{spec:t.export()}))},ie=Object(l.a)(function(e){return{main:{backgroundColor:e.palette.grey[200],marginTop:e.spacing(1),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"}}}),le=function(e){var t=e.result,a=e.operand2,n=ie();return r.a.createElement("div",{className:n.main},t?function(e){switch(e.view.getType()){case"unit":return r.a.createElement(oe,{view:e,operand2:a});case"layer":return r.a.createElement(ce,{view:e,operand2:a});default:throw new Error("".concat(e.view.getType()," view has not been implemented"))}}(t):"Empty View")},ue=a(307),se=a.n(ue),de=a(308),pe=a.n(de),me=a(506),fe=function(e){var t=e.specs,a=e.operand1Id,o=e.operand2,c=e.result,i=Object(n.useContext)(U),l=function(e){t.forEach(function(t){t.id===a&&i({type:"operate",operand1:t.spec,operand2:o,operator:e})})},u=null===a||null===o,s=null===a||null===o,d=null!==a||null===o,p=null!==a||null===o,m=null===a||null!==o||null!==c;return r.a.createElement(me.a,{container:!0,justify:"space-between"},r.a.createElement(me.a,{item:!0},r.a.createElement(h.a,{onClick:function(){return l("layer")},disabled:u},"Layer"),r.a.createElement(h.a,{onClick:function(){return l("concat")},disabled:s},"Concat"),r.a.createElement(h.a,{onClick:function(){return l("repeat")},disabled:d},"Repeat"),r.a.createElement(h.a,{onClick:function(){return l("facet")},disabled:p},"Facet"),r.a.createElement(h.a,{onClick:function(){return l("place")},disabled:m},"Place")),r.a.createElement(me.a,{item:!0},r.a.createElement(h.a,{onClick:function(){return i({type:"undo"})}},r.a.createElement(se.a,null)," \xa0 Undo"),r.a.createElement(h.a,{onClick:function(){return i({type:"redo"})}},r.a.createElement(pe.a,null)," \xa0 Redo")))},ge=a(309),ve=a(507),he=a(508),be=a(509),ye=a(514),we=a(310),Ee=a(512),ke=a(515),je=a(510),Ce=a(516),Oe=a(31),Se=a(29),xe=a(32),Ne=a(25),Ie=a(27);function Me(e){return JSON.parse(JSON.stringify(e))}var Te=function(e){function t(e){return Object(Ne.a)(this,t),Object(Oe.a)(this,Object(Se.a)(t).call(this,e))}return Object(xe.a)(t,e),t}(function(){function e(t){Object(Ne.a)(this,e),this.view=void 0,this.view=t}return Object(Ie.a)(e,[{key:"export",value:function(){return this.view.export()}}]),e}()),Be=function(){function e(t){Object(Ne.a)(this,e),this.spec=void 0,this.spec=Me(t)}return Object(Ie.a)(e,[{key:"edit",value:function(e){this.spec=Me(e)}},{key:"export",value:function(){return Me(this.spec)}},{key:"getType",value:function(){return"unit"}}]),e}(),De=function(){function e(){Object(Ne.a)(this,e),this.layer=void 0,this.layer=[]}return Object(Ie.a)(e,[{key:"export",value:function(){return{layer:this.layer.map(function(e){return e.export()})}}},{key:"append",value:function(e){this.layer.push(new Te(e))}},{key:"prepend",value:function(e){this.layer.unshift(new Te(e))}},{key:"remove",value:function(e){this.layer.splice(e,1)}},{key:"isCompatible",value:function(e){var t=e.export();return!t.spec&&!t.layer&&!t.concat&&!t.hconcat&&!t.vconcat}},{key:"rearrange",value:function(e,t){!function(e,t,a){if(!(t in e&&a in e))throw new Error("from (=".concat(t,") or to (=").concat(a,") is out of arr bound (=[0,").concat(e.length-1,"])"));var n=e[t];if(t<a)for(var r=t;r<a;r++)e[r]=e[r+1];else for(var o=t;o>a;o--)e[o]=e[o-1];e[a]=n}(this.layer,e,t)}},{key:"getType",value:function(){return"layer"}}]),e}(),Re=function(e,t){return{current:t(e.current),undoStack:ve.a(e.current,e.undoStack),redoStack:[]}},Ae=function(e,t){switch(t.type){case"add-spec":return Re(e,function(e){var a=e.specs,n=e.specCount,r=Object(V.a)(e,["specs","specCount"]);return Object(ge.a)({specs:he.a({id:n,spec:t.json,alias:t.alias},a),specCount:n+1},r)});case"modify-spec":return Re(e,be.a(ye.a("specs"),we.a(function(e){return e.id===t.id?{id:t.id,spec:t.json,alias:t.alias}:e})));case"delete-spec":return Re(e,Ee.a(be.a(ye.a("specs"),ke.a(function(e){return e.id!==t.id})),be.a(ye.a("operand1Id"),function(e){return e===t.id?null:e})));case"undo":var a=e.current,n=e.undoStack,r=e.redoStack;return n.length>0?{redoStack:ve.a(a,r),current:n[0],undoStack:n.slice(1)}:e;case"redo":var o=e.current,c=e.undoStack,i=e.redoStack;return i.length>0?{redoStack:i.slice(1),current:i[0],undoStack:ve.a(o,c)}:e;case"select-operand1":return Re(e,be.a(ye.a("operand1Id"),je.a(t.id)));case"select-operand2":return Re(e,be.a(ye.a("operand2"),je.a(t.operand)));case"operate":return Re(e,Ee.a(be.a(ye.a("result"),function(a){switch(e.current.result=Ce.a(a),t.operator){case"place":return new Te(new Be(t.operand1));case"layer":var n=new De,r=new Be(t.operand1);return n.isCompatible(r)&&n.isCompatible(t.operand2.view)&&(n.append(t.operand2.view),n.append(r),t.operand2.view=n),a;case"concat":case"repeat":case"facet":return a;default:return function(e){throw new Error("Unexpected object: "+e)}(t.operator)}}),be.a(ye.a("operand1Id"),je.a(null)),be.a(ye.a("operand2"),je.a(null))));default:throw new Error("impossible")}},Fe={current:{specs:[],specCount:0,operand1Id:null,operand2:null,result:null},undoStack:[],redoStack:[]},Le=Object(l.a)(function(e){return{root:{height:600,display:"flex"},left:{height:"100%",display:"flex",flexDirection:"column",width:150,marginRight:e.spacing(1)},right:{flexGrow:1,display:"flex",flexDirection:"column"}}}),We=function(){var e=Object(n.useReducer)(Ae,Fe),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Le();return r.a.createElement(U.Provider,{value:o},r.a.createElement("div",{className:c.root},r.a.createElement("div",{className:c.left},r.a.createElement(ae,null),r.a.createElement(Q,{currentState:a.current})),r.a.createElement("div",{className:c.right},r.a.createElement(fe,{specs:a.current.specs,operand1Id:a.current.operand1Id,operand2:a.current.operand2,result:a.current.result}),r.a.createElement(le,{result:a.current.result,operand2:a.current.operand2}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[318,1,2]]]);
//# sourceMappingURL=main.23831fd0.chunk.js.map