(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{285:function(e,t,a){e.exports=a(400)},290:function(e,t,a){},400:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),c=a(70),l=a.n(c),o=(a(290),a(49)),i=a(454),s=a(459),u=a(465),m=a(204),d=a(260),p=a.n(d),f=a(277),g=a(202),b=a(207),v=a.n(b),E=a(271),h=a.n(E),y=a(270),w=a.n(y),j=a(236),k=a(460),O=function(e){return{tag:"failure",value:e}},S=a(264),C=a.n(S),x=a(268),N=a.n(x),M=a(267),B=a.n(M),T=a(470),A=a(461),V=a(474),R=a(475),F=a(462),G=Object(i.a)(function(e){return{textField:{marginTop:e.spacing(0),marginBottom:e.spacing(4),width:300},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},errorMessage:{fontStyle:"italic",color:"red"}}}),L=function(e){var t=e.isOpen,a=e.onClose,n=e.value,c=e.setValue,l=e.alias,o=e.setAlias,i=e.errorMsg,s=e.extras,u=G();return r.a.createElement(V.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",maxWidth:"lg",fullWidth:!0},r.a.createElement(R.a,{disableTypography:!0},r.a.createElement(T.a,{id:"standard-name",label:"Name",className:u.textField,value:l,onChange:function(e){return o(e.target.value)},margin:"normal"}),r.a.createElement(k.a,{onClick:function(){return a(!0)}},r.a.createElement(B.a,null),"\xa0 Save"),s,r.a.createElement(A.a,{className:u.closeButton,onClick:function(){return a(!1)}},r.a.createElement(N.a,null))),r.a.createElement(F.a,null,r.a.createElement("div",{className:"editor"},r.a.createElement(C.a,{language:"json",value:n,height:400,onChange:function(e){return c(e)},editorDidMount:function(e){return e.focus()},options:{automaticLayout:!0,cursorBlinking:"smooth",folding:!0,lineNumbersMinChars:4,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})),r.a.createElement("span",{className:u.errorMessage},i||null)))},W=[{data:{url:"https://vega.github.io/editor/data/cars.json"},mark:"point",encoding:{x:{field:"Horsepower",type:"quantitative"},y:{field:"Miles_per_Gallon",type:"quantitative"}}},{data:{url:"https://vega.github.io/editor/data/population.json"},transform:[{filter:"datum.year == 2000"}],mark:"bar",encoding:{y:{field:"age",type:"ordinal",scale:{rangeStep:17}},x:{aggregate:"sum",field:"people",type:"quantitative",axis:{title:"population"}}}}],z=function(e){var t=e.showModal,a=e.setShowModal,c=e.value,l=e.setValue,i=e.alias,s=e.setAlias,u=e.onSuccess,m=Object(n.useState)(""),d=Object(o.a)(m,2),p=d[0],f=d[1],g=W.map(function(e,t){return r.a.createElement(k.a,{key:t,onClick:function(){return l(v()(e))}},"Example ",t+1)});return r.a.createElement(L,{isOpen:t,onClose:function(e){if(!e)return f(""),void a(!1);var t=function(e){try{var t=JSON.parse(e);return"data"in t&&"url"in t.data?(j.a(t),{tag:"success",value:t}):O("data field must exist and must be url.")}catch(a){if(a instanceof SyntaxError)return O(a.message);if("Invalid spec"===a.message)return O(a.message);throw a}}(c);switch(t.tag){case"success":return f(""),u(i,t.value),void a(!1);case"failure":return void f(t.value)}},value:c,setValue:l,alias:i,setAlias:s,errorMsg:p,extras:g})},D=a(476),I=Object(i.a)(function(e){return{keyColumn:{textAlign:"right"}}}),q=function(e){var t=e.table,a=e.children,n=I(),c=r.a.createElement("table",null,r.a.createElement("tbody",null,t.map(function(e){var t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement("tr",{key:a},r.a.createElement("td",{className:n.keyColumn},r.a.createElement("strong",null,a),":"),r.a.createElement("td",null,c))})));return r.a.createElement(D.a,{placement:"top",title:c},a)},J=a(464),U=a(463),_=r.a.createContext(null),H=r.a.memo(f.a,function(e,t){var a=e.spec,n=Object(m.a)(e,["spec"]),r=t.spec,c=Object(m.a)(t,["spec"]);return p()(n,c)&&g.a.isSameSpec(a,r)}),P=Object(i.a)(function(e){return{wrapper:{height:150,"&::after":{display:"block",position:"relative",marginTop:"-57%",width:150,backgroundImage:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75))",height:"75%",content:"''"}},image:{overflow:"hidden",height:150},preview:{position:"relative",userSelect:"none",border:1,borderColor:function(e){return e?"orange":"white"},borderStyle:"solid"},center:{position:"absolute",left:"50%",transform:"translate(-50%, 0)"},top:{position:"absolute",right:0,top:0,"& button":{marginRight:e.spacing(1),marginTop:e.spacing(1)}},bottom:{bottom:10,color:"white"}}}),X=function(e){var t=e.spec,a=e.onToggleActive,c=e.active,l=Object(n.useState)(!1),i=Object(o.a)(l,2),s=i[0],m=i[1],d=Object(n.useState)(""),p=Object(o.a)(d,2),f=p[0],g=p[1],b=Object(n.useState)(""),E=Object(o.a)(b,2),y=E[0],j=E[1],k=Object(n.useContext)(_),O=P(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{disableGutters:!0,className:O.preview,onClick:a},r.a.createElement(q,{table:[["Data URL",t.spec.data.url],["Mark Type",t.spec.mark]]},r.a.createElement("div",{className:O.wrapper},r.a.createElement("div",{className:O.image},r.a.createElement(H,{spec:t.spec,width:150,height:150})))),r.a.createElement("div",{className:O.top},r.a.createElement(J.a,{size:"small",color:"primary",onClick:function(){g(v()(t.spec)),j(t.alias),m(!0)}},r.a.createElement(w.a,null)),r.a.createElement(J.a,{size:"small",color:"secondary",onClick:function(){k({type:"delete-spec",id:t.id})}},r.a.createElement(h.a,null))),r.a.createElement("div",{className:O.center+" "+O.bottom},t.alias)),r.a.createElement(u.a,null),r.a.createElement(z,{showModal:s,setShowModal:m,onSuccess:function(e,a){k({type:"modify-spec",json:a,alias:e,id:t.id})},value:f,setValue:g,alias:y,setAlias:j}))},Y=Object(i.a)(function(e){return{list:{overflowY:"auto",overflowX:"hidden",flexGrow:1,paddingTop:0,paddingBottom:0}}}),$=function(e){var t=e.specs,a=Object(n.useState)(null),c=Object(o.a)(a,2),l=c[0],i=c[1],m=Y();return r.a.createElement(s.a,{className:m.list},r.a.createElement(u.a,null),t.map(function(e){return r.a.createElement(X,{key:e.id,spec:e,active:e.id===l,onToggleActive:(t=e.id,function(){return i(l===t?null:t)})});var t}))},K=a(272),Q=a.n(K),Z=Object(i.a)(function(e){return{button:{marginBottom:e.spacing(1)}}}),ee=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),p=d[0],f=d[1],g=Object(n.useContext)(_),b=Z();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{onClick:function(){u(""),f("Untitled"),c(!0)},className:b.button},r.a.createElement(Q.a,null)," \xa0 New Spec"),r.a.createElement(z,{showModal:a,setShowModal:c,onSuccess:function(e,t){g({type:"add-spec",json:t,alias:e})},value:s,setValue:u,alias:p,setAlias:f}))},te=Object(i.a)(function(e){return{main:{backgroundColor:e.palette.grey[200],marginTop:e.spacing(1),flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"}}}),ae=function(e){var t=e.viz,a=te();return r.a.createElement("div",{className:a.main},t)},ne=a(273),re=a.n(ne),ce=a(274),le=a.n(ce),oe=a(466),ie=function(e){var t=e.mode,a=Object(n.useContext)(_),c=function(e){return a({type:"select-mode",mode:e})};return r.a.createElement(oe.a,{container:!0,justify:"space-between"},r.a.createElement(oe.a,{item:!0},r.a.createElement(k.a,{onClick:function(){return c("layer")},disabled:!!t},"Layer"),r.a.createElement(k.a,{onClick:function(){return c("concat")},disabled:!!t},"Concat"),r.a.createElement(k.a,{onClick:function(){return c("repeat")},disabled:!!t},"Repeat"),r.a.createElement(k.a,{onClick:function(){return c("facet")},disabled:!!t},"Facet")),r.a.createElement(oe.a,{item:!0},r.a.createElement(k.a,{onClick:function(){return a({type:"undo"})}},r.a.createElement(re.a,null)," \xa0 Undo"),r.a.createElement(k.a,{onClick:function(){return a({type:"redo"})}},r.a.createElement(le.a,null)," \xa0 Redo")))},se=a(275),ue=a(467),me=a(468),de=a(469),pe=a(472),fe=a(276),ge=a(473),be=function(e,t){return{current:t(e.current),undoStack:ue.a(e.current,e.undoStack),redoStack:[]}},ve=function(e,t){switch(t.type){case"add-spec":return be(e,function(e){var a=e.specs,n=e.specCount,r=Object(m.a)(e,["specs","specCount"]);return Object(se.a)({specs:me.a({id:n,spec:t.json,alias:t.alias},a),specCount:n+1},r)});case"modify-spec":return be(e,de.a(pe.a("specs"),fe.a(function(e){return e.id===t.id?{id:t.id,spec:t.json,alias:t.alias}:e})));case"delete-spec":return be(e,de.a(pe.a("specs"),ge.a(function(e){return e.id!==t.id})));case"undo":var a=e.current,n=e.undoStack,r=e.redoStack;return n.length>0?{redoStack:ue.a(a,r),current:n[0],undoStack:n.slice(1)}:e;case"redo":var c=e.current,l=e.undoStack,o=e.redoStack;return o.length>0?{redoStack:o.slice(1),current:o[0],undoStack:ue.a(c,l)}:e;case"select-mode":return e.current.mode?e:be(e,de.a(pe.a("mode"),function(e){return t.mode}));default:throw new Error("impossible")}},Ee=Object(i.a)(function(e){return{root:{height:600,display:"flex"},left:{height:"100%",display:"flex",flexDirection:"column",width:150,marginRight:e.spacing(1)},right:{flexGrow:1,display:"flex",flexDirection:"column"}}}),he=function(){var e=Object(n.useReducer)(ve,{current:{specs:[],specCount:0,mode:"initial",mainViewElements:null},undoStack:[],redoStack:[]}),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(r.a.createElement("div",null,"Empty View")),i=Object(o.a)(l,2),s=i[0],u=(i[1],Ee());return r.a.createElement(_.Provider,{value:c},r.a.createElement("div",{className:u.root},r.a.createElement("div",{className:u.left},r.a.createElement(ee,null),r.a.createElement($,{specs:a.current.specs})),r.a.createElement("div",{className:u.right},r.a.createElement(ie,{mode:a.current.mode}),r.a.createElement(ae,{viz:s}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[285,1,2]]]);
//# sourceMappingURL=main.f562fee3.chunk.js.map